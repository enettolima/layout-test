DELIMITER //
CREATE PROCEDURE p2 (s VARCHAR(3), d DATE)
BEGIN
	SELECT 
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 00:00:00') and date_out >= CONCAT(d, ' 00:30:00')) as '00:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 00:30:00') and date_out >= CONCAT(d, ' 01:00:00')) as '00:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 01:00:00') and date_out >= CONCAT(d, ' 01:30:00')) as '01:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 01:30:00') and date_out >= CONCAT(d, ' 02:00:00')) as '01:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 02:00:00') and date_out >= CONCAT(d, ' 02:30:00')) as '02:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 02:30:00') and date_out >= CONCAT(d, ' 03:00:00')) as '02:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 03:00:00') and date_out >= CONCAT(d, ' 03:30:00')) as '03:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 03:30:00') and date_out >= CONCAT(d, ' 04:00:00')) as '03:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 04:00:00') and date_out >= CONCAT(d, ' 04:30:00')) as '04:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 04:30:00') and date_out >= CONCAT(d, ' 05:00:00')) as '04:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 05:00:00') and date_out >= CONCAT(d, ' 05:30:00')) as '05:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 05:30:00') and date_out >= CONCAT(d, ' 06:00:00')) as '05:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 06:00:00') and date_out >= CONCAT(d, ' 06:30:00')) as '06:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 06:30:00') and date_out >= CONCAT(d, ' 07:00:00')) as '06:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 07:00:00') and date_out >= CONCAT(d, ' 07:30:00')) as '07:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 07:30:00') and date_out >= CONCAT(d, ' 08:00:00')) as '07:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 08:00:00') and date_out >= CONCAT(d, ' 08:30:00')) as '08:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 08:30:00') and date_out >= CONCAT(d, ' 09:00:00')) as '08:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 09:00:00') and date_out >= CONCAT(d, ' 09:30:00')) as '09:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 09:30:00') and date_out >= CONCAT(d, ' 10:00:00')) as '09:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 10:00:00') and date_out >= CONCAT(d, ' 10:30:00')) as '10:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 10:30:00') and date_out >= CONCAT(d, ' 11:00:00')) as '10:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 11:00:00') and date_out >= CONCAT(d, ' 11:30:00')) as '11:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 11:30:00') and date_out >= CONCAT(d, ' 12:00:00')) as '11:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 12:00:00') and date_out >= CONCAT(d, ' 12:30:00')) as '12:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 12:30:00') and date_out >= CONCAT(d, ' 13:00:00')) as '12:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 13:00:00') and date_out >= CONCAT(d, ' 13:30:00')) as '13:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 13:30:00') and date_out >= CONCAT(d, ' 14:00:00')) as '13:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 14:00:00') and date_out >= CONCAT(d, ' 14:30:00')) as '14:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 14:30:00') and date_out >= CONCAT(d, ' 15:00:00')) as '14:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 15:00:00') and date_out >= CONCAT(d, ' 15:30:00')) as '15:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 15:30:00') and date_out >= CONCAT(d, ' 16:00:00')) as '15:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 16:00:00') and date_out >= CONCAT(d, ' 16:30:00')) as '16:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 16:30:00') and date_out >= CONCAT(d, ' 17:00:00')) as '16:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 17:00:00') and date_out >= CONCAT(d, ' 17:30:00')) as '17:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 17:30:00') and date_out >= CONCAT(d, ' 18:00:00')) as '17:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 18:00:00') and date_out >= CONCAT(d, ' 18:30:00')) as '18:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 18:30:00') and date_out >= CONCAT(d, ' 19:00:00')) as '18:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 19:00:00') and date_out >= CONCAT(d, ' 19:30:00')) as '19:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 19:30:00') and date_out >= CONCAT(d, ' 20:00:00')) as '19:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 20:00:00') and date_out >= CONCAT(d, ' 20:30:00')) as '20:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 20:30:00') and date_out >= CONCAT(d, ' 21:00:00')) as '20:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 21:00:00') and date_out >= CONCAT(d, ' 21:30:00')) as '21:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 21:30:00') and date_out >= CONCAT(d, ' 22:00:00')) as '21:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 22:00:00') and date_out >= CONCAT(d, ' 22:30:00')) as '22:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 22:30:00') and date_out >= CONCAT(d, ' 23:00:00')) as '22:30',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 23:00:00') and date_out >= CONCAT(d, ' 23:30:00')) as '23:00',
		( select count(*) from scheduled_inout where store_id = s and date_in <= CONCAT(d, ' 23:30:00') and date_out >= CONCAT(d, ' 23:59:00')) as '23:30'
	;
	END
//
